{
  "swagger": "2.0",
  "info": {
    "title": "Containarium API",
    "description": "Container management API for LXC-based development environments. Provides both gRPC and REST interfaces for managing containers, SSH keys, and system resources.",
    "version": "1.0",
    "contact": {
      "name": "Containarium",
      "url": "https://github.com/footprintai/containarium"
    },
    "license": {
      "name": "Apache 2.0",
      "url": "https://github.com/footprintai/containarium/blob/main/LICENSE"
    }
  },
  "tags": [
    {
      "name": "ContainerService"
    },
    {
      "name": "NetworkService"
    },
    {
      "name": "AppService"
    },
    {
      "name": "TrafficService"
    },
    {
      "name": "EventService"
    }
  ],
  "schemes": [
    "https",
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/v1/apps": {
      "get": {
        "summary": "List applications",
        "description": "Returns a list of deployed applications with optional filtering by state or username.",
        "operationId": "AppService_ListApps",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListAppsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username (empty for all - admin only)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "stateFilter",
            "description": "Filter by state\n\n - APP_STATE_UNSPECIFIED: Unspecified state (should not be used)\n - APP_STATE_UPLOADING: Source code is being uploaded\n - APP_STATE_BUILDING: Container image is being built (using Podman)\n - APP_STATE_RUNNING: App is running and healthy\n - APP_STATE_STOPPED: App is stopped by user\n - APP_STATE_FAILED: Build or runtime failure\n - APP_STATE_RESTARTING: App is restarting",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "APP_STATE_UNSPECIFIED",
              "APP_STATE_UPLOADING",
              "APP_STATE_BUILDING",
              "APP_STATE_RUNNING",
              "APP_STATE_STOPPED",
              "APP_STATE_FAILED",
              "APP_STATE_RESTARTING"
            ],
            "default": "APP_STATE_UNSPECIFIED"
          }
        ],
        "tags": [
          "Applications"
        ]
      },
      "post": {
        "summary": "Deploy an application",
        "description": "Deploys a new application or updates an existing one. Accepts source code + Dockerfile/Containerfile or auto-detects language and generates one.",
        "operationId": "AppService_DeployApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeployAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/DeployAppRequest"
            }
          }
        ],
        "tags": [
          "Applications"
        ]
      }
    },
    "/v1/apps/{username}/{appName}": {
      "get": {
        "summary": "Get application details",
        "description": "Returns detailed information about a specific application including state, domain, and configuration.",
        "operationId": "AppService_GetApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Applications"
        ]
      },
      "delete": {
        "summary": "Delete an application",
        "description": "Permanently deletes an application and optionally removes associated data volumes.",
        "operationId": "AppService_DeleteApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeleteAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "removeData",
            "description": "Remove persistent data volumes",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Applications"
        ]
      }
    },
    "/v1/apps/{username}/{appName}/logs": {
      "get": {
        "summary": "Get application logs",
        "description": "Returns application logs with optional streaming. Use follow=true for real-time log streaming.",
        "operationId": "AppService_GetAppLogs",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/GetAppLogsResponse"
                },
                "error": {
                  "$ref": "#/definitions/Status"
                }
              },
              "title": "Stream result of GetAppLogsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "tailLines",
            "description": "Number of lines from end (default: 100)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "follow",
            "description": "Stream logs (Server-Sent Events)",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Application Operations"
        ]
      }
    },
    "/v1/apps/{username}/{appName}/restart": {
      "post": {
        "summary": "Restart an application",
        "description": "Restarts an application by stopping and starting it.",
        "operationId": "AppService_RestartApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/RestartAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/RestartAppBody"
            }
          }
        ],
        "tags": [
          "Application Operations"
        ]
      }
    },
    "/v1/apps/{username}/{appName}/start": {
      "post": {
        "summary": "Start an application",
        "description": "Starts a stopped application.",
        "operationId": "AppService_StartApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/StartAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StartAppBody"
            }
          }
        ],
        "tags": [
          "Application Operations"
        ]
      }
    },
    "/v1/apps/{username}/{appName}/stop": {
      "post": {
        "summary": "Stop an application",
        "description": "Stops a running application. The application can be started again later.",
        "operationId": "AppService_StopApp",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/StopAppResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "appName",
            "description": "App name",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StopAppBody"
            }
          }
        ],
        "tags": [
          "Application Operations"
        ]
      }
    },
    "/v1/containers": {
      "get": {
        "summary": "List all containers",
        "description": "Returns a list of containers with optional filtering by state, username, or labels. Use query parameters to filter results.",
        "operationId": "ContainerService_ListContainers",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListContainersResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "state",
            "description": "Filter by state (optional, empty means all states)\n\n - CONTAINER_STATE_UNSPECIFIED: Unspecified state (should not be used)\n - CONTAINER_STATE_RUNNING: Container is running\n - CONTAINER_STATE_STOPPED: Container is stopped\n - CONTAINER_STATE_FROZEN: Container is frozen (paused)\n - CONTAINER_STATE_CREATING: Container is being created\n - CONTAINER_STATE_ERROR: Container creation failed or is in error state",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "CONTAINER_STATE_UNSPECIFIED",
              "CONTAINER_STATE_RUNNING",
              "CONTAINER_STATE_STOPPED",
              "CONTAINER_STATE_FROZEN",
              "CONTAINER_STATE_CREATING",
              "CONTAINER_STATE_ERROR"
            ],
            "default": "CONTAINER_STATE_UNSPECIFIED"
          },
          {
            "name": "username",
            "description": "Filter by username (optional, empty means all users)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "labelFilter",
            "description": "Filter by labels (optional, empty means no filter)",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Containers"
        ]
      },
      "post": {
        "summary": "Create a new container",
        "description": "Creates a new LXC container with specified resources and configuration. The container will be started automatically after creation.",
        "operationId": "ContainerService_CreateContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/CreateContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/CreateContainerRequest"
            }
          }
        ],
        "tags": [
          "Containers"
        ]
      }
    },
    "/v1/containers/{containerName}/connections": {
      "get": {
        "summary": "Get active connections",
        "description": "Returns active network connections for a container tracked by conntrack.",
        "operationId": "TrafficService_GetConnections",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetConnectionsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "containerName",
            "description": "Container name (required)",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "protocol",
            "description": "Filter by protocol (optional)\n\n - PROTOCOL_UNSPECIFIED: Unspecified protocol (should not be used)\n - PROTOCOL_TCP: TCP protocol\n - PROTOCOL_UDP: UDP protocol\n - PROTOCOL_ICMP: ICMP protocol",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "PROTOCOL_UNSPECIFIED",
              "PROTOCOL_TCP",
              "PROTOCOL_UDP",
              "PROTOCOL_ICMP"
            ],
            "default": "PROTOCOL_UNSPECIFIED"
          },
          {
            "name": "destIpPrefix",
            "description": "Filter by destination IP prefix (optional, e.g., \"10.100.\")",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "destPort",
            "description": "Filter by destination port (optional, 0 = all)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "limit",
            "description": "Maximum number of connections to return (default: 100)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "Traffic"
        ]
      }
    },
    "/v1/containers/{containerName}/connections/summary": {
      "get": {
        "summary": "Get connection summary",
        "description": "Returns aggregate connection statistics for a container.",
        "operationId": "TrafficService_GetConnectionSummary",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetConnectionSummaryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "containerName",
            "description": "Container name (required)",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Traffic"
        ]
      }
    },
    "/v1/containers/{containerName}/traffic/aggregates": {
      "get": {
        "summary": "Get traffic aggregates",
        "description": "Returns aggregated traffic statistics over time for analysis.",
        "operationId": "TrafficService_GetTrafficAggregates",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetTrafficAggregatesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "containerName",
            "description": "Container name (required)",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "startTime",
            "description": "Start time",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "endTime",
            "description": "End time",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "interval",
            "description": "Aggregation interval (e.g., \"1m\", \"5m\", \"1h\", \"1d\")",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "groupByDestIp",
            "description": "Group by destination IP",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "groupByDestPort",
            "description": "Group by destination port",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Traffic"
        ]
      }
    },
    "/v1/containers/{containerName}/traffic/history": {
      "get": {
        "summary": "Query traffic history",
        "description": "Returns historical connection data from persistent storage.",
        "operationId": "TrafficService_QueryTrafficHistory",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/QueryTrafficHistoryResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "containerName",
            "description": "Container name (required)",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "startTime",
            "description": "Start time for query range",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "endTime",
            "description": "End time for query range",
            "in": "query",
            "required": false,
            "type": "string",
            "format": "date-time"
          },
          {
            "name": "destIp",
            "description": "Filter by destination IP (optional)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "destPort",
            "description": "Filter by destination port (optional, 0 = all)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int64"
          },
          {
            "name": "offset",
            "description": "Pagination: offset",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "limit",
            "description": "Pagination: limit (default: 100, max: 1000)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "Traffic"
        ]
      }
    },
    "/v1/containers/{username}": {
      "get": {
        "summary": "Get container details",
        "description": "Returns detailed information about a specific container including state, resources, network info, and current metrics.",
        "operationId": "ContainerService_GetContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container to get",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Containers"
        ]
      },
      "delete": {
        "summary": "Delete a container",
        "description": "Permanently deletes a container. Use force=true query parameter to delete running containers.",
        "operationId": "ContainerService_DeleteContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeleteContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container to delete",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "force",
            "description": "Force delete even if container is running",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Containers"
        ]
      }
    },
    "/v1/containers/{username}/acl": {
      "get": {
        "summary": "Get container firewall rules",
        "description": "Returns the network ACL (firewall rules) configured for a user's DevBox container.",
        "operationId": "NetworkService_GetContainerACL",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetContainerACLResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username (container owner)",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Network"
        ]
      },
      "put": {
        "summary": "Update container firewall rules",
        "description": "Updates the network ACL for a DevBox container. Use a preset for common configurations or specify custom rules.",
        "operationId": "NetworkService_UpdateContainerACL",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UpdateContainerACLResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username (container owner)",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateContainerACLBody"
            }
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/containers/{username}/resize": {
      "put": {
        "summary": "Resize container resources",
        "description": "Dynamically adjusts CPU, memory, and disk resources without container restart. Disk can only be increased, not decreased.",
        "operationId": "ContainerService_ResizeContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ResizeContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container to resize",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/ResizeContainerBody"
            }
          }
        ],
        "tags": [
          "Container Operations"
        ]
      }
    },
    "/v1/containers/{username}/ssh-keys": {
      "post": {
        "summary": "Add SSH key",
        "description": "Adds an SSH public key to a container's authorized_keys file, allowing SSH access with the corresponding private key.",
        "operationId": "ContainerService_AddSSHKey",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/AddSSHKeyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddSSHKeyBody"
            }
          }
        ],
        "tags": [
          "SSH Management"
        ]
      }
    },
    "/v1/containers/{username}/ssh-keys/{sshPublicKey}": {
      "delete": {
        "summary": "Remove SSH key",
        "description": "Removes an SSH public key from a container's authorized_keys file, revoking SSH access for that key. The ssh_public_key should be URL-encoded.",
        "operationId": "ContainerService_RemoveSSHKey",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/RemoveSSHKeyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "sshPublicKey",
            "description": "SSH public key to remove (exact match)",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "SSH Management"
        ]
      }
    },
    "/v1/containers/{username}/start": {
      "post": {
        "summary": "Start a container",
        "description": "Starts a stopped container. The container must exist and be in STOPPED state.",
        "operationId": "ContainerService_StartContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/StartContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container to start",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StartContainerBody"
            }
          }
        ],
        "tags": [
          "Container Operations"
        ]
      }
    },
    "/v1/containers/{username}/stop": {
      "post": {
        "summary": "Stop a container",
        "description": "Gracefully stops a running container with optional timeout and force parameters. The container can be started again later.",
        "operationId": "ContainerService_StopContainer",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/StopContainerResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container to stop",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/StopContainerBody"
            }
          }
        ],
        "tags": [
          "Container Operations"
        ]
      }
    },
    "/v1/events/subscribe": {
      "get": {
        "summary": "Subscribe to real-time events",
        "description": "Opens a Server-Sent Events stream for real-time resource updates. Filter by resource types using query parameters.",
        "operationId": "EventService_SubscribeEvents",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/Event"
                },
                "error": {
                  "$ref": "#/definitions/Status"
                }
              },
              "title": "Stream result of Event"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "resourceTypes",
            "description": "Filter by resource types (empty = all types)\n\n - RESOURCE_TYPE_UNSPECIFIED: Unspecified resource type\n - RESOURCE_TYPE_CONTAINER: Container resource\n - RESOURCE_TYPE_APP: App resource\n - RESOURCE_TYPE_ROUTE: Route resource\n - RESOURCE_TYPE_METRICS: Metrics resource\n - RESOURCE_TYPE_TRAFFIC: Traffic resource",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "RESOURCE_TYPE_UNSPECIFIED",
                "RESOURCE_TYPE_CONTAINER",
                "RESOURCE_TYPE_APP",
                "RESOURCE_TYPE_ROUTE",
                "RESOURCE_TYPE_METRICS",
                "RESOURCE_TYPE_TRAFFIC"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "includeMetrics",
            "description": "Include metrics events (can be noisy, default false)",
            "in": "query",
            "required": false,
            "type": "boolean"
          },
          {
            "name": "metricsIntervalSeconds",
            "description": "Metrics interval in seconds (default: 5, min: 1, max: 60)",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "Events"
        ]
      }
    },
    "/v1/metrics": {
      "get": {
        "summary": "Get container metrics",
        "description": "Returns runtime metrics (CPU, memory, disk, network usage) for containers. Specify username to get metrics for a specific container, or omit to get all containers.",
        "operationId": "ContainerService_GetMetrics",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetMetricsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container (empty for all containers)",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Monitoring"
        ]
      }
    },
    "/v1/metrics/{username}": {
      "get": {
        "summary": "Get container metrics",
        "description": "Returns runtime metrics (CPU, memory, disk, network usage) for containers. Specify username to get metrics for a specific container, or omit to get all containers.",
        "operationId": "ContainerService_GetMetrics2",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetMetricsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Username of the container (empty for all containers)",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Monitoring"
        ]
      }
    },
    "/v1/network/acl-presets": {
      "get": {
        "summary": "List ACL presets",
        "description": "Returns available firewall rule presets with their default configurations.",
        "operationId": "NetworkService_ListACLPresets",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListACLPresetsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/dns-records": {
      "get": {
        "summary": "List DNS records",
        "description": "Returns DNS records configured for the base domain. Useful for selecting available subdomains when creating routes.",
        "operationId": "NetworkService_ListDNSRecords",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListDNSRecordsResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "recordType",
            "description": "Optional record type filter (e.g., \"A\", \"CNAME\")",
            "in": "query",
            "required": false,
            "type": "string"
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/passthrough": {
      "get": {
        "summary": "List passthrough routes",
        "description": "Returns all TCP/UDP port forwarding rules configured via iptables. These routes provide direct passthrough without TLS termination.",
        "operationId": "NetworkService_ListPassthroughRoutes",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/ListPassthroughRoutesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "tags": [
          "Network"
        ]
      },
      "post": {
        "summary": "Add passthrough route",
        "description": "Creates a new TCP/UDP port forwarding rule via iptables. Traffic is forwarded directly to the container without TLS termination, suitable for mTLS or custom protocols.",
        "operationId": "NetworkService_AddPassthroughRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/AddPassthroughRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddPassthroughRouteRequest"
            }
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/passthrough/{externalPort}": {
      "delete": {
        "summary": "Delete passthrough route",
        "description": "Removes a TCP/UDP port forwarding rule from iptables.",
        "operationId": "NetworkService_DeletePassthroughRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeletePassthroughRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "externalPort",
            "description": "External port to remove",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "protocol",
            "description": "Protocol: TCP or UDP\n\n - ROUTE_PROTOCOL_UNSPECIFIED: Unspecified protocol (defaults to HTTP)\n - ROUTE_PROTOCOL_HTTP: HTTP/1.1 and HTTP/2 (standard web traffic) - for proxy routes\n - ROUTE_PROTOCOL_GRPC: gRPC (requires HTTP/2 transport) - for proxy routes\n - ROUTE_PROTOCOL_TCP: TCP passthrough - for passthrough routes\n - ROUTE_PROTOCOL_UDP: UDP passthrough - for passthrough routes",
            "in": "query",
            "required": false,
            "type": "string",
            "enum": [
              "ROUTE_PROTOCOL_UNSPECIFIED",
              "ROUTE_PROTOCOL_HTTP",
              "ROUTE_PROTOCOL_GRPC",
              "ROUTE_PROTOCOL_TCP",
              "ROUTE_PROTOCOL_UDP"
            ],
            "default": "ROUTE_PROTOCOL_UNSPECIFIED"
          }
        ],
        "tags": [
          "Network"
        ]
      },
      "put": {
        "summary": "Update passthrough route",
        "description": "Updates an existing TCP/UDP port forwarding rule. Can be used to enable/disable the route or change the target.",
        "operationId": "NetworkService_UpdatePassthroughRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UpdatePassthroughRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "externalPort",
            "description": "External port to update (required, identifies the route)",
            "in": "path",
            "required": true,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdatePassthroughRouteBody"
            }
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/routes": {
      "get": {
        "summary": "List proxy routes",
        "description": "Returns all DNS/domain to container mappings configured in the reverse proxy.",
        "operationId": "NetworkService_GetRoutes",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetRoutesResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "username",
            "description": "Filter by username (optional)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "activeOnly",
            "description": "Filter by active status (optional)",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Network"
        ]
      },
      "post": {
        "summary": "Add proxy route",
        "description": "Creates a new DNS/domain to container mapping in the reverse proxy.",
        "operationId": "NetworkService_AddRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/AddRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/AddRouteRequest"
            }
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/routes/{domain}": {
      "delete": {
        "summary": "Delete proxy route",
        "description": "Removes a DNS/domain to container mapping from the reverse proxy.",
        "operationId": "NetworkService_DeleteRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/DeleteRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "domain",
            "description": "Domain name to delete",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "Network"
        ]
      },
      "put": {
        "summary": "Update proxy route",
        "description": "Updates an existing DNS/domain to container mapping.",
        "operationId": "NetworkService_UpdateRoute",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/UpdateRouteResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "domain",
            "description": "Domain name to update",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/UpdateRouteBody"
            }
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/network/topology": {
      "get": {
        "summary": "Get network topology",
        "description": "Returns the network topology including all containers, apps, proxy routes, and their connections for visualization.",
        "operationId": "NetworkService_GetNetworkTopology",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetNetworkTopologyResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "includeStopped",
            "description": "Include stopped containers/apps",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Network"
        ]
      }
    },
    "/v1/system/info": {
      "get": {
        "summary": "Get system information",
        "description": "Returns information about the host system including Incus version, available resources, and container counts.",
        "operationId": "ContainerService_GetSystemInfo",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/GetSystemInfoResponse"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "tags": [
          "System"
        ]
      }
    },
    "/v1/traffic/subscribe": {
      "get": {
        "summary": "Subscribe to traffic events",
        "description": "Opens a Server-Sent Events stream for real-time connection events.",
        "operationId": "TrafficService_SubscribeTraffic",
        "responses": {
          "200": {
            "description": "A successful response.(streaming responses)",
            "schema": {
              "type": "object",
              "properties": {
                "result": {
                  "$ref": "#/definitions/TrafficEvent"
                },
                "error": {
                  "$ref": "#/definitions/Status"
                }
              },
              "title": "Stream result of TrafficEvent"
            }
          },
          "default": {
            "description": "An unexpected error response.",
            "schema": {
              "$ref": "#/definitions/Status"
            }
          }
        },
        "parameters": [
          {
            "name": "containerName",
            "description": "Container name (optional, empty = all containers)",
            "in": "query",
            "required": false,
            "type": "string"
          },
          {
            "name": "eventTypes",
            "description": "Event types to include (empty = all types)\n\n - TRAFFIC_EVENT_TYPE_UNSPECIFIED: Unspecified event type\n - TRAFFIC_EVENT_TYPE_NEW: New connection established\n - TRAFFIC_EVENT_TYPE_UPDATE: Connection state or counters updated\n - TRAFFIC_EVENT_TYPE_DESTROY: Connection terminated",
            "in": "query",
            "required": false,
            "type": "array",
            "items": {
              "type": "string",
              "enum": [
                "TRAFFIC_EVENT_TYPE_UNSPECIFIED",
                "TRAFFIC_EVENT_TYPE_NEW",
                "TRAFFIC_EVENT_TYPE_UPDATE",
                "TRAFFIC_EVENT_TYPE_DESTROY"
              ]
            },
            "collectionFormat": "multi"
          },
          {
            "name": "externalOnly",
            "description": "Only include external traffic (exclude inter-container)",
            "in": "query",
            "required": false,
            "type": "boolean"
          }
        ],
        "tags": [
          "Traffic"
        ]
      }
    }
  },
  "definitions": {
    "ACLAction": {
      "type": "string",
      "enum": [
        "ACL_ACTION_UNSPECIFIED",
        "ACL_ACTION_ALLOW",
        "ACL_ACTION_DROP",
        "ACL_ACTION_REJECT"
      ],
      "default": "ACL_ACTION_UNSPECIFIED",
      "description": "- ACL_ACTION_UNSPECIFIED: Unspecified action (should not be used)\n - ACL_ACTION_ALLOW: Allow the traffic\n - ACL_ACTION_DROP: Drop the traffic silently\n - ACL_ACTION_REJECT: Reject the traffic with ICMP response",
      "title": "ACLAction represents the action to take when a rule matches"
    },
    "ACLPreset": {
      "type": "string",
      "enum": [
        "ACL_PRESET_UNSPECIFIED",
        "ACL_PRESET_FULL_ISOLATION",
        "ACL_PRESET_HTTP_ONLY",
        "ACL_PRESET_PERMISSIVE",
        "ACL_PRESET_CUSTOM"
      ],
      "default": "ACL_PRESET_UNSPECIFIED",
      "description": "- ACL_PRESET_UNSPECIFIED: Unspecified preset\n - ACL_PRESET_FULL_ISOLATION: Full isolation: only allow HTTP from proxy, block inter-container traffic\n - ACL_PRESET_HTTP_ONLY: HTTP only: allow HTTP/HTTPS inbound, standard egress\n - ACL_PRESET_PERMISSIVE: Permissive: allow all traffic (for development)\n - ACL_PRESET_CUSTOM: Custom: user-defined rules",
      "title": "ACLPreset represents predefined firewall rule sets"
    },
    "ACLPresetInfo": {
      "type": "object",
      "properties": {
        "preset": {
          "$ref": "#/definitions/ACLPreset",
          "title": "Preset type"
        },
        "name": {
          "type": "string",
          "title": "Display name"
        },
        "description": {
          "type": "string",
          "title": "Description"
        },
        "defaultIngressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Default ingress rules for this preset"
        },
        "defaultEgressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Default egress rules for this preset"
        }
      }
    },
    "ACLRule": {
      "type": "object",
      "properties": {
        "priority": {
          "type": "integer",
          "format": "int32",
          "title": "Rule priority (lower number = higher priority)"
        },
        "action": {
          "$ref": "#/definitions/ACLAction",
          "title": "Action to take when rule matches"
        },
        "source": {
          "type": "string",
          "title": "Source address (CIDR notation, \"@internal\", \"@external\", or \"*\")"
        },
        "destination": {
          "type": "string",
          "title": "Destination address (CIDR notation, \"@internal\", \"@external\", or \"*\")"
        },
        "destinationPort": {
          "type": "string",
          "title": "Destination port(s): \"80\", \"80,443\", \"1000-2000\", or \"*\""
        },
        "protocol": {
          "type": "string",
          "title": "Protocol: \"tcp\", \"udp\", \"icmp\", or \"*\""
        },
        "description": {
          "type": "string",
          "title": "Human-readable description"
        }
      },
      "title": "ACLRule represents a single firewall rule"
    },
    "AddPassthroughRouteRequest": {
      "type": "object",
      "properties": {
        "externalPort": {
          "type": "integer",
          "format": "int32",
          "title": "External port on the host"
        },
        "targetIp": {
          "type": "string",
          "title": "Target container IP address"
        },
        "targetPort": {
          "type": "integer",
          "format": "int32",
          "title": "Target port on the container"
        },
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol: TCP or UDP (defaults to TCP)"
        },
        "containerName": {
          "type": "string",
          "title": "Optional: Associated container name (for display)"
        },
        "description": {
          "type": "string",
          "title": "Optional: Description"
        }
      },
      "title": "AddPassthroughRouteRequest adds a new passthrough route"
    },
    "AddPassthroughRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/PassthroughRoute",
          "title": "The created route"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "AddRouteRequest": {
      "type": "object",
      "properties": {
        "domain": {
          "type": "string",
          "title": "Domain name (e.g., \"test.kafeido.app\" or subdomain like \"myapp\")"
        },
        "targetIp": {
          "type": "string",
          "title": "Target container IP address"
        },
        "targetPort": {
          "type": "integer",
          "format": "int32",
          "title": "Target port on the container"
        },
        "containerName": {
          "type": "string",
          "title": "Optional: Associated container name (for display purposes)"
        },
        "description": {
          "type": "string",
          "title": "Optional: Description"
        },
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol type (HTTP or gRPC, defaults to HTTP)"
        }
      },
      "title": "AddRouteRequest adds a new proxy route"
    },
    "AddRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/ProxyRoute",
          "title": "The created route"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "AddSSHKeyBody": {
      "type": "object",
      "properties": {
        "sshPublicKey": {
          "type": "string",
          "title": "SSH public key to add"
        }
      },
      "title": "AddSSHKeyRequest is the request to add an SSH key to a container"
    },
    "AddSSHKeyResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "totalKeys": {
          "type": "integer",
          "format": "int32",
          "title": "Total number of SSH keys now authorized"
        }
      },
      "title": "AddSSHKeyResponse is the response from adding an SSH key"
    },
    "Any": {
      "type": "object",
      "properties": {
        "@type": {
          "type": "string"
        }
      },
      "additionalProperties": {}
    },
    "App": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "Unique app ID (UUID) - immutable primary key"
        },
        "name": {
          "type": "string",
          "title": "App name (user-defined, e.g., \"myapp\")"
        },
        "username": {
          "type": "string",
          "title": "Owner username"
        },
        "containerName": {
          "type": "string",
          "title": "LXC container name where app runs"
        },
        "subdomain": {
          "type": "string",
          "title": "Subdomain (e.g., \"myapp\")"
        },
        "fullDomain": {
          "type": "string",
          "title": "Full domain (e.g., \"myapp.containarium.dev\")"
        },
        "port": {
          "type": "integer",
          "format": "int32",
          "title": "App port inside container"
        },
        "state": {
          "$ref": "#/definitions/AppState",
          "title": "Current state"
        },
        "containerImage": {
          "type": "string",
          "title": "Built container image tag (via Podman)"
        },
        "dockerfilePath": {
          "type": "string",
          "title": "Path to Dockerfile in source"
        },
        "envVars": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Environment variables"
        },
        "createdAt": {
          "type": "string",
          "format": "date-time",
          "title": "When app was created"
        },
        "updatedAt": {
          "type": "string",
          "format": "date-time",
          "title": "When app was last updated"
        },
        "deployedAt": {
          "type": "string",
          "format": "date-time",
          "title": "Last successful deployment time"
        },
        "errorMessage": {
          "type": "string",
          "title": "Error message if state is FAILED"
        },
        "restartCount": {
          "type": "integer",
          "format": "int32",
          "title": "Number of restarts"
        },
        "containerIp": {
          "type": "string",
          "title": "Container IP address (e.g., \"10.100.0.20\")"
        },
        "aclPreset": {
          "$ref": "#/definitions/ACLPreset",
          "title": "Firewall ACL preset applied to this app"
        },
        "route": {
          "$ref": "#/definitions/ProxyRoute",
          "title": "Proxy route configuration"
        },
        "resources": {
          "$ref": "#/definitions/AppResources",
          "title": "Resource limits"
        }
      },
      "title": "App represents a deployed application"
    },
    "AppEvent": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "The app that was affected"
        },
        "previousState": {
          "$ref": "#/definitions/AppState",
          "title": "Previous state (for state change events)"
        }
      },
      "title": "AppEvent contains app-specific event data"
    },
    "AppResources": {
      "type": "object",
      "properties": {
        "cpu": {
          "type": "string",
          "title": "CPU limit (e.g., \"1\", \"0.5\", \"2\")"
        },
        "memory": {
          "type": "string",
          "title": "Memory limit (e.g., \"256MB\", \"1GB\")"
        },
        "disk": {
          "type": "string",
          "title": "Disk limit (e.g., \"1GB\", \"10GB\")"
        }
      },
      "title": "AppResources defines resource limits for an app container"
    },
    "AppState": {
      "type": "string",
      "enum": [
        "APP_STATE_UNSPECIFIED",
        "APP_STATE_UPLOADING",
        "APP_STATE_BUILDING",
        "APP_STATE_RUNNING",
        "APP_STATE_STOPPED",
        "APP_STATE_FAILED",
        "APP_STATE_RESTARTING"
      ],
      "default": "APP_STATE_UNSPECIFIED",
      "description": "- APP_STATE_UNSPECIFIED: Unspecified state (should not be used)\n - APP_STATE_UPLOADING: Source code is being uploaded\n - APP_STATE_BUILDING: Container image is being built (using Podman)\n - APP_STATE_RUNNING: App is running and healthy\n - APP_STATE_STOPPED: App is stopped by user\n - APP_STATE_FAILED: Build or runtime failure\n - APP_STATE_RESTARTING: App is restarting",
      "title": "AppState represents the lifecycle state of an application"
    },
    "BuildpackOptions": {
      "type": "object",
      "properties": {
        "nodeVersion": {
          "type": "string",
          "title": "Node.js version (e.g., \"18\", \"20\")"
        },
        "pythonVersion": {
          "type": "string",
          "title": "Python version (e.g., \"3.11\", \"3.12\")"
        },
        "goVersion": {
          "type": "string",
          "title": "Go version (e.g., \"1.21\", \"1.22\")"
        },
        "rustVersion": {
          "type": "string",
          "title": "Rust version (e.g., \"1.75\")"
        },
        "autoDetect": {
          "type": "boolean",
          "title": "Enable/disable auto-detection (default: true)"
        }
      },
      "title": "BuildpackOptions for auto-generating Dockerfiles/Containerfiles"
    },
    "Connection": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "Unique connection ID (from conntrack)"
        },
        "containerName": {
          "type": "string",
          "title": "Container name this connection belongs to"
        },
        "containerIp": {
          "type": "string",
          "title": "Container IP address"
        },
        "protocol": {
          "$ref": "#/definitions/Protocol",
          "title": "Protocol (TCP, UDP, ICMP)"
        },
        "sourceIp": {
          "type": "string",
          "title": "Source IP address"
        },
        "sourcePort": {
          "type": "integer",
          "format": "int64",
          "title": "Source port (0 for ICMP)"
        },
        "destIp": {
          "type": "string",
          "title": "Destination IP address"
        },
        "destPort": {
          "type": "integer",
          "format": "int64",
          "title": "Destination port (0 for ICMP)"
        },
        "state": {
          "$ref": "#/definitions/ConnectionState",
          "title": "Connection state (primarily for TCP)"
        },
        "direction": {
          "$ref": "#/definitions/TrafficDirection",
          "title": "Direction relative to the container"
        },
        "bytesSent": {
          "type": "string",
          "format": "int64",
          "title": "Bytes sent from the container"
        },
        "bytesReceived": {
          "type": "string",
          "format": "int64",
          "title": "Bytes received by the container"
        },
        "packetsSent": {
          "type": "string",
          "format": "int64",
          "title": "Packets sent from the container"
        },
        "packetsReceived": {
          "type": "string",
          "format": "int64",
          "title": "Packets received by the container"
        },
        "firstSeen": {
          "type": "string",
          "format": "date-time",
          "title": "When the connection was first seen"
        },
        "lastSeen": {
          "type": "string",
          "format": "date-time",
          "title": "When the connection was last active"
        },
        "timeoutSeconds": {
          "type": "integer",
          "format": "int32",
          "title": "TTL remaining in conntrack (seconds)"
        }
      },
      "title": "Connection represents an active or recent network connection"
    },
    "ConnectionState": {
      "type": "string",
      "enum": [
        "CONNECTION_STATE_UNSPECIFIED",
        "CONNECTION_STATE_NEW",
        "CONNECTION_STATE_ESTABLISHED",
        "CONNECTION_STATE_RELATED",
        "CONNECTION_STATE_TIME_WAIT",
        "CONNECTION_STATE_CLOSE_WAIT",
        "CONNECTION_STATE_FIN_WAIT",
        "CONNECTION_STATE_CLOSED",
        "CONNECTION_STATE_SYN_SENT",
        "CONNECTION_STATE_SYN_RECV"
      ],
      "default": "CONNECTION_STATE_UNSPECIFIED",
      "description": "- CONNECTION_STATE_UNSPECIFIED: Unspecified state\n - CONNECTION_STATE_NEW: New connection (SYN sent/received)\n - CONNECTION_STATE_ESTABLISHED: Connection established\n - CONNECTION_STATE_RELATED: Related connection (e.g., FTP data connection)\n - CONNECTION_STATE_TIME_WAIT: Connection in TIME_WAIT state\n - CONNECTION_STATE_CLOSE_WAIT: Connection in CLOSE_WAIT state\n - CONNECTION_STATE_FIN_WAIT: Connection in FIN_WAIT state\n - CONNECTION_STATE_CLOSED: Connection closed\n - CONNECTION_STATE_SYN_SENT: SYN sent, waiting for response\n - CONNECTION_STATE_SYN_RECV: SYN received, waiting for ACK",
      "title": "ConnectionState represents the state of a TCP connection"
    },
    "ConnectionSummary": {
      "type": "object",
      "properties": {
        "containerName": {
          "type": "string",
          "title": "Container name"
        },
        "activeConnections": {
          "type": "integer",
          "format": "int32",
          "title": "Total active connections"
        },
        "tcpConnections": {
          "type": "integer",
          "format": "int32",
          "title": "Active TCP connections"
        },
        "udpConnections": {
          "type": "integer",
          "format": "int32",
          "title": "Active UDP connections"
        },
        "totalBytesSent": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes sent (all connections)"
        },
        "totalBytesReceived": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes received (all connections)"
        },
        "topDestinations": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DestinationStats"
          },
          "title": "Top destination IPs by connection count"
        }
      },
      "title": "ConnectionSummary provides aggregate statistics for a container"
    },
    "Container": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Unique container name (typically username-container)"
        },
        "username": {
          "type": "string",
          "title": "Username who owns this container"
        },
        "state": {
          "$ref": "#/definitions/ContainerState",
          "title": "Current state of the container"
        },
        "resources": {
          "$ref": "#/definitions/ResourceLimits",
          "title": "Resource limits applied to this container"
        },
        "sshKeys": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "SSH public keys authorized for this container"
        },
        "network": {
          "$ref": "#/definitions/NetworkInfo",
          "title": "Network information"
        },
        "createdAt": {
          "type": "string",
          "format": "int64",
          "title": "Unix timestamp when container was created"
        },
        "updatedAt": {
          "type": "string",
          "format": "int64",
          "title": "Unix timestamp when container was last updated"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Custom labels for categorization and metadata"
        },
        "image": {
          "type": "string",
          "title": "Image used to create the container (e.g., \"images:ubuntu/24.04\")"
        },
        "podmanEnabled": {
          "type": "boolean",
          "title": "Whether Podman support is enabled (nesting)"
        },
        "stack": {
          "type": "string",
          "title": "Software stack installed in the container (e.g., \"nodejs\", \"python\")"
        }
      },
      "title": "Container represents a complete container instance"
    },
    "ContainerEvent": {
      "type": "object",
      "properties": {
        "container": {
          "$ref": "#/definitions/Container",
          "title": "The container that was affected"
        },
        "previousState": {
          "$ref": "#/definitions/ContainerState",
          "title": "Previous state (for state change events)"
        }
      },
      "title": "ContainerEvent contains container-specific event data"
    },
    "ContainerMetrics": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Container name"
        },
        "cpuUsageSeconds": {
          "type": "string",
          "format": "int64",
          "title": "CPU usage in seconds (cumulative CPU time used)"
        },
        "memoryUsageBytes": {
          "type": "string",
          "format": "int64",
          "title": "Current memory usage in bytes"
        },
        "memoryPeakBytes": {
          "type": "string",
          "format": "int64",
          "title": "Peak memory usage in bytes"
        },
        "diskUsageBytes": {
          "type": "string",
          "format": "int64",
          "title": "Disk usage in bytes (root filesystem)"
        },
        "networkRxBytes": {
          "type": "string",
          "format": "int64",
          "title": "Network bytes received (all interfaces except loopback)"
        },
        "networkTxBytes": {
          "type": "string",
          "format": "int64",
          "title": "Network bytes transmitted (all interfaces except loopback)"
        },
        "processCount": {
          "type": "integer",
          "format": "int32",
          "title": "Number of running processes in container"
        }
      },
      "title": "ContainerMetrics contains runtime metrics for a container"
    },
    "ContainerState": {
      "type": "string",
      "enum": [
        "CONTAINER_STATE_UNSPECIFIED",
        "CONTAINER_STATE_RUNNING",
        "CONTAINER_STATE_STOPPED",
        "CONTAINER_STATE_FROZEN",
        "CONTAINER_STATE_CREATING",
        "CONTAINER_STATE_ERROR"
      ],
      "default": "CONTAINER_STATE_UNSPECIFIED",
      "description": "- CONTAINER_STATE_UNSPECIFIED: Unspecified state (should not be used)\n - CONTAINER_STATE_RUNNING: Container is running\n - CONTAINER_STATE_STOPPED: Container is stopped\n - CONTAINER_STATE_FROZEN: Container is frozen (paused)\n - CONTAINER_STATE_CREATING: Container is being created\n - CONTAINER_STATE_ERROR: Container creation failed or is in error state",
      "title": "ContainerState represents the current state of a container"
    },
    "CreateContainerRequest": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string",
          "title": "Username for the container (required)"
        },
        "resources": {
          "$ref": "#/definitions/ResourceLimits",
          "title": "Resource limits (optional, uses defaults if not specified)"
        },
        "sshKeys": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "SSH public keys to authorize (optional, can be added later)"
        },
        "labels": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Custom labels (optional)"
        },
        "image": {
          "type": "string",
          "title": "Container image to use (optional, defaults to images:ubuntu/24.04)"
        },
        "enablePodman": {
          "type": "boolean",
          "title": "Enable Podman support (optional, defaults to true)"
        },
        "async": {
          "type": "boolean",
          "title": "Async mode - if true, returns immediately with CREATING state\nClient should poll GetContainer to check completion"
        },
        "staticIp": {
          "type": "string",
          "title": "Static IP address to assign (optional, e.g., \"10.0.3.100\")\nMust be within the container network CIDR (e.g., 10.0.3.0/24)\nIf empty, DHCP will assign an IP automatically"
        },
        "stack": {
          "type": "string",
          "title": "Software stack to install (optional, e.g., \"nodejs\", \"python\", \"fullstack\")\nSee available stacks in configs/stacks.yaml"
        }
      },
      "title": "CreateContainerRequest is the request to create a new container"
    },
    "CreateContainerResponse": {
      "type": "object",
      "properties": {
        "container": {
          "$ref": "#/definitions/Container",
          "title": "The created container"
        },
        "message": {
          "type": "string",
          "title": "Human-readable message about the creation"
        },
        "sshCommand": {
          "type": "string",
          "title": "SSH connection string for the user"
        }
      },
      "title": "CreateContainerResponse is the response from creating a container"
    },
    "DNSRecord": {
      "type": "object",
      "properties": {
        "type": {
          "type": "string",
          "title": "Record type (A, CNAME, etc.)"
        },
        "name": {
          "type": "string",
          "title": "Record name (subdomain or @ for root)"
        },
        "data": {
          "type": "string",
          "title": "Record data (IP address for A records)"
        },
        "ttl": {
          "type": "integer",
          "format": "int32",
          "title": "TTL in seconds"
        }
      },
      "title": "DNSRecord represents a DNS record"
    },
    "DeleteAppResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "DeleteContainerResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "containerName": {
          "type": "string",
          "title": "Name of the deleted container"
        }
      },
      "title": "DeleteContainerResponse is the response from deleting a container"
    },
    "DeletePassthroughRouteResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "DeleteRouteResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "DeployAppRequest": {
      "type": "object",
      "properties": {
        "username": {
          "type": "string",
          "title": "Username (from JWT)"
        },
        "appName": {
          "type": "string",
          "title": "App name (alphanumeric + hyphens)"
        },
        "sourceTarball": {
          "type": "string",
          "format": "byte",
          "title": "Gzipped tarball of source code"
        },
        "dockerfilePath": {
          "type": "string",
          "title": "Path to Dockerfile (default: \"./Dockerfile\")"
        },
        "port": {
          "type": "integer",
          "format": "int32",
          "title": "App port (default: 3000)"
        },
        "envVars": {
          "type": "object",
          "additionalProperties": {
            "type": "string"
          },
          "title": "Environment variables"
        },
        "subdomain": {
          "type": "string",
          "title": "Custom subdomain (optional, defaults to app_name)"
        },
        "buildpack": {
          "$ref": "#/definitions/BuildpackOptions",
          "title": "Buildpack options for auto-generated Dockerfiles/Containerfiles"
        }
      },
      "title": "DeployAppRequest deploys a new app or updates existing"
    },
    "DeployAppResponse": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "Deployed app"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        },
        "buildLogUrl": {
          "type": "string",
          "title": "URL to stream build logs"
        },
        "detectedLanguage": {
          "$ref": "#/definitions/DetectedLanguage",
          "title": "Detected language information"
        }
      }
    },
    "DestinationStats": {
      "type": "object",
      "properties": {
        "destIp": {
          "type": "string",
          "title": "Destination IP address"
        },
        "connectionCount": {
          "type": "integer",
          "format": "int32",
          "title": "Number of connections to this destination"
        },
        "bytesTotal": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes transferred to/from this destination"
        }
      },
      "title": "DestinationStats provides traffic statistics for a destination"
    },
    "DetectedLanguage": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "title": "Language name (e.g., \"Node.js\", \"Python\", \"Go\")"
        },
        "version": {
          "type": "string",
          "title": "Detected version"
        },
        "dockerfileProvided": {
          "type": "boolean",
          "title": "true if user provided Dockerfile"
        }
      },
      "title": "DetectedLanguage information"
    },
    "Event": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "Unique event ID for deduplication"
        },
        "type": {
          "$ref": "#/definitions/EventType",
          "title": "Type of event"
        },
        "resourceType": {
          "$ref": "#/definitions/ResourceType",
          "title": "Resource type affected"
        },
        "resourceId": {
          "type": "string",
          "title": "Resource identifier (container name, app ID, route domain)"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "title": "When the event occurred"
        },
        "containerEvent": {
          "$ref": "#/definitions/ContainerEvent"
        },
        "appEvent": {
          "$ref": "#/definitions/AppEvent"
        },
        "routeEvent": {
          "$ref": "#/definitions/RouteEvent"
        },
        "metricsEvent": {
          "$ref": "#/definitions/MetricsEvent"
        },
        "trafficEvent": {
          "$ref": "#/definitions/TrafficEvent"
        }
      },
      "title": "Event is the top-level event message sent to clients"
    },
    "EventType": {
      "type": "string",
      "enum": [
        "EVENT_TYPE_UNSPECIFIED",
        "EVENT_TYPE_CONTAINER_CREATED",
        "EVENT_TYPE_CONTAINER_DELETED",
        "EVENT_TYPE_CONTAINER_STARTED",
        "EVENT_TYPE_CONTAINER_STOPPED",
        "EVENT_TYPE_CONTAINER_STATE_CHANGED",
        "EVENT_TYPE_APP_DEPLOYED",
        "EVENT_TYPE_APP_DELETED",
        "EVENT_TYPE_APP_STARTED",
        "EVENT_TYPE_APP_STOPPED",
        "EVENT_TYPE_APP_STATE_CHANGED",
        "EVENT_TYPE_ROUTE_ADDED",
        "EVENT_TYPE_ROUTE_DELETED",
        "EVENT_TYPE_METRICS_UPDATE",
        "EVENT_TYPE_TRAFFIC_UPDATE"
      ],
      "default": "EVENT_TYPE_UNSPECIFIED",
      "description": "- EVENT_TYPE_UNSPECIFIED: Unspecified event type (should not be used)\n - EVENT_TYPE_CONTAINER_CREATED: Container events (1-9)\nContainer was created\n - EVENT_TYPE_CONTAINER_DELETED: Container was deleted\n - EVENT_TYPE_CONTAINER_STARTED: Container was started\n - EVENT_TYPE_CONTAINER_STOPPED: Container was stopped\n - EVENT_TYPE_CONTAINER_STATE_CHANGED: Container state changed\n - EVENT_TYPE_APP_DEPLOYED: App events (10-19)\nApp was deployed\n - EVENT_TYPE_APP_DELETED: App was deleted\n - EVENT_TYPE_APP_STARTED: App was started\n - EVENT_TYPE_APP_STOPPED: App was stopped\n - EVENT_TYPE_APP_STATE_CHANGED: App state changed\n - EVENT_TYPE_ROUTE_ADDED: Network events (20-29)\nRoute was added\n - EVENT_TYPE_ROUTE_DELETED: Route was deleted\n - EVENT_TYPE_METRICS_UPDATE: System events (30-39)\nMetrics update\n - EVENT_TYPE_TRAFFIC_UPDATE: Traffic events (40-49)\nTraffic/connection update",
      "title": "EventType represents the type of resource change event"
    },
    "GetAppLogsResponse": {
      "type": "object",
      "properties": {
        "logLines": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "title": "Log lines"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "title": "Timestamp of logs"
        }
      }
    },
    "GetAppResponse": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "App details"
        }
      }
    },
    "GetConnectionSummaryResponse": {
      "type": "object",
      "properties": {
        "summary": {
          "$ref": "#/definitions/ConnectionSummary",
          "title": "Connection summary"
        }
      }
    },
    "GetConnectionsResponse": {
      "type": "object",
      "properties": {
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Connection"
          },
          "title": "Active connections"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count (may be more than returned if limit applied)"
        }
      }
    },
    "GetContainerACLResponse": {
      "type": "object",
      "properties": {
        "acl": {
          "$ref": "#/definitions/NetworkACL",
          "title": "Firewall rules"
        }
      }
    },
    "GetContainerResponse": {
      "type": "object",
      "properties": {
        "container": {
          "$ref": "#/definitions/Container",
          "title": "The requested container"
        },
        "metrics": {
          "$ref": "#/definitions/ContainerMetrics",
          "title": "Current metrics for the container (optional)"
        }
      },
      "title": "GetContainerResponse is the response from getting a container"
    },
    "GetMetricsResponse": {
      "type": "object",
      "properties": {
        "metrics": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ContainerMetrics"
          },
          "title": "Metrics for requested container(s)"
        }
      },
      "title": "GetMetricsResponse is the response from getting metrics"
    },
    "GetNetworkTopologyResponse": {
      "type": "object",
      "properties": {
        "topology": {
          "$ref": "#/definitions/NetworkTopology",
          "title": "Network topology data"
        }
      }
    },
    "GetRoutesResponse": {
      "type": "object",
      "properties": {
        "routes": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ProxyRoute"
          },
          "title": "List of routes"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count"
        }
      }
    },
    "GetSystemInfoResponse": {
      "type": "object",
      "properties": {
        "info": {
          "$ref": "#/definitions/SystemInfo",
          "title": "System information"
        }
      },
      "title": "GetSystemInfoResponse is the response from getting system information"
    },
    "GetTrafficAggregatesResponse": {
      "type": "object",
      "properties": {
        "aggregates": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/TrafficAggregate"
          },
          "title": "Aggregated traffic data"
        }
      }
    },
    "HistoricalConnection": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "format": "int64",
          "title": "Database ID"
        },
        "containerName": {
          "type": "string",
          "title": "Container name"
        },
        "protocol": {
          "$ref": "#/definitions/Protocol",
          "title": "Protocol"
        },
        "sourceIp": {
          "type": "string",
          "title": "Source IP address"
        },
        "sourcePort": {
          "type": "integer",
          "format": "int64",
          "title": "Source port"
        },
        "destIp": {
          "type": "string",
          "title": "Destination IP address"
        },
        "destPort": {
          "type": "integer",
          "format": "int64",
          "title": "Destination port"
        },
        "direction": {
          "$ref": "#/definitions/TrafficDirection",
          "title": "Direction relative to container"
        },
        "bytesSent": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes sent"
        },
        "bytesReceived": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes received"
        },
        "startedAt": {
          "type": "string",
          "format": "date-time",
          "title": "Connection start time"
        },
        "endedAt": {
          "type": "string",
          "format": "date-time",
          "title": "Connection end time (null if still active)"
        },
        "durationSeconds": {
          "type": "string",
          "format": "int64",
          "title": "Duration in seconds"
        }
      },
      "title": "HistoricalConnection represents a persisted connection record"
    },
    "ListACLPresetsResponse": {
      "type": "object",
      "properties": {
        "presets": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLPresetInfo"
          },
          "title": "Available presets"
        }
      }
    },
    "ListAppsResponse": {
      "type": "object",
      "properties": {
        "apps": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/App"
          },
          "title": "List of apps"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count"
        }
      }
    },
    "ListContainersResponse": {
      "type": "object",
      "properties": {
        "containers": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Container"
          },
          "title": "List of containers matching the filter criteria"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count of containers"
        }
      },
      "title": "ListContainersResponse is the response from listing containers"
    },
    "ListDNSRecordsResponse": {
      "type": "object",
      "properties": {
        "records": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/DNSRecord"
          },
          "title": "DNS records"
        },
        "baseDomain": {
          "type": "string",
          "title": "Base domain"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count"
        }
      }
    },
    "ListPassthroughRoutesResponse": {
      "type": "object",
      "properties": {
        "routes": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/PassthroughRoute"
          },
          "title": "List of passthrough routes"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count"
        }
      }
    },
    "MetricsEvent": {
      "type": "object",
      "properties": {
        "metrics": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ContainerMetrics"
          },
          "title": "Metrics for all containers"
        }
      },
      "title": "MetricsEvent contains metrics update data"
    },
    "NetworkACL": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "Unique ACL ID"
        },
        "name": {
          "type": "string",
          "title": "ACL name (e.g., \"acl-alice-web\")"
        },
        "description": {
          "type": "string",
          "title": "Description"
        },
        "preset": {
          "$ref": "#/definitions/ACLPreset",
          "title": "Preset type (if using a predefined rule set)"
        },
        "ingressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Ingress (inbound) rules"
        },
        "egressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Egress (outbound) rules"
        },
        "appId": {
          "type": "string",
          "title": "Associated app ID (if app-specific)"
        },
        "containerName": {
          "type": "string",
          "title": "Associated container name"
        }
      },
      "title": "NetworkACL represents firewall rules for a container/app"
    },
    "NetworkEdge": {
      "type": "object",
      "properties": {
        "source": {
          "type": "string",
          "title": "Source node ID"
        },
        "target": {
          "type": "string",
          "title": "Target node ID"
        },
        "type": {
          "type": "string",
          "title": "Edge type: \"route\", \"blocked\", \"allowed\""
        },
        "ports": {
          "type": "string",
          "title": "Port(s) on this edge"
        },
        "protocol": {
          "type": "string",
          "title": "Protocol"
        }
      },
      "title": "NetworkEdge represents a connection between nodes"
    },
    "NetworkInfo": {
      "type": "object",
      "properties": {
        "ipAddress": {
          "type": "string",
          "title": "Primary IP address assigned to the container"
        },
        "macAddress": {
          "type": "string",
          "title": "MAC address of the container's network interface"
        },
        "interface": {
          "type": "string",
          "title": "Network interface name (e.g., \"eth0\")"
        },
        "bridge": {
          "type": "string",
          "title": "Network bridge name"
        }
      },
      "title": "NetworkInfo contains network configuration for a container"
    },
    "NetworkNode": {
      "type": "object",
      "properties": {
        "id": {
          "type": "string",
          "title": "Node ID"
        },
        "type": {
          "type": "string",
          "title": "Node type: \"proxy\", \"container\", \"app\""
        },
        "name": {
          "type": "string",
          "title": "Display name"
        },
        "ipAddress": {
          "type": "string",
          "title": "IP address (if applicable)"
        },
        "state": {
          "type": "string",
          "title": "Node state: \"running\", \"stopped\", \"error\""
        },
        "aclName": {
          "type": "string",
          "title": "Associated ACL name"
        }
      },
      "title": "NetworkNode represents a node in the network topology"
    },
    "NetworkTopology": {
      "type": "object",
      "properties": {
        "nodes": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/NetworkNode"
          },
          "title": "All nodes in the network"
        },
        "edges": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/NetworkEdge"
          },
          "title": "All edges (connections) between nodes"
        },
        "networkCidr": {
          "type": "string",
          "title": "Network CIDR (e.g., \"10.100.0.0/24\")"
        },
        "gatewayIp": {
          "type": "string",
          "title": "Gateway IP"
        }
      },
      "title": "NetworkTopology represents the complete network visualization"
    },
    "PassthroughRoute": {
      "type": "object",
      "properties": {
        "externalPort": {
          "type": "integer",
          "format": "int32",
          "title": "External port on the host"
        },
        "targetIp": {
          "type": "string",
          "title": "Target container IP address"
        },
        "targetPort": {
          "type": "integer",
          "format": "int32",
          "title": "Target port on the container"
        },
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol: TCP or UDP"
        },
        "active": {
          "type": "boolean",
          "title": "Whether the route is active"
        },
        "containerName": {
          "type": "string",
          "title": "Associated container name (for display)"
        },
        "description": {
          "type": "string",
          "title": "Description"
        }
      },
      "title": "PassthroughRoute represents a direct TCP/UDP port forwarding rule"
    },
    "Protocol": {
      "type": "string",
      "enum": [
        "PROTOCOL_UNSPECIFIED",
        "PROTOCOL_TCP",
        "PROTOCOL_UDP",
        "PROTOCOL_ICMP"
      ],
      "default": "PROTOCOL_UNSPECIFIED",
      "description": "- PROTOCOL_UNSPECIFIED: Unspecified protocol (should not be used)\n - PROTOCOL_TCP: TCP protocol\n - PROTOCOL_UDP: UDP protocol\n - PROTOCOL_ICMP: ICMP protocol",
      "title": "Protocol represents the network protocol of a connection"
    },
    "ProxyRoute": {
      "type": "object",
      "properties": {
        "subdomain": {
          "type": "string",
          "title": "Subdomain (e.g., \"alice-web\")"
        },
        "fullDomain": {
          "type": "string",
          "title": "Full domain (e.g., \"alice-web.containarium.dev\")"
        },
        "containerIp": {
          "type": "string",
          "title": "Container IP address"
        },
        "port": {
          "type": "integer",
          "format": "int32",
          "title": "Container port"
        },
        "active": {
          "type": "boolean",
          "title": "Whether the route is active"
        },
        "appId": {
          "type": "string",
          "title": "Associated app ID"
        },
        "appName": {
          "type": "string",
          "title": "Associated app name"
        },
        "username": {
          "type": "string",
          "title": "Owner username"
        },
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol type (HTTP or gRPC)"
        }
      },
      "title": "ProxyRoute represents a DNS/domain to container mapping"
    },
    "QueryTrafficHistoryResponse": {
      "type": "object",
      "properties": {
        "connections": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/HistoricalConnection"
          },
          "title": "Historical connections"
        },
        "totalCount": {
          "type": "integer",
          "format": "int32",
          "title": "Total count matching query"
        }
      }
    },
    "RemoveSSHKeyResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "totalKeys": {
          "type": "integer",
          "format": "int32",
          "title": "Total number of SSH keys remaining"
        }
      },
      "title": "RemoveSSHKeyResponse is the response from removing an SSH key"
    },
    "ResizeContainerBody": {
      "type": "object",
      "properties": {
        "cpu": {
          "type": "string",
          "title": "New CPU limit (e.g., \"4\", \"2-4\") - empty means no change"
        },
        "memory": {
          "type": "string",
          "title": "New memory limit (e.g., \"8GB\", \"4096MB\") - empty means no change"
        },
        "disk": {
          "type": "string",
          "title": "New disk size (e.g., \"100GB\") - empty means no change\nNote: Can only increase, cannot shrink"
        }
      },
      "title": "ResizeContainerRequest is the request to resize container resources"
    },
    "ResizeContainerResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "container": {
          "$ref": "#/definitions/Container",
          "title": "Updated container with new resources"
        }
      },
      "title": "ResizeContainerResponse is the response from resizing a container"
    },
    "ResourceLimits": {
      "type": "object",
      "properties": {
        "cpu": {
          "type": "string",
          "title": "CPU limit (e.g., \"4\" for 4 cores)"
        },
        "memory": {
          "type": "string",
          "title": "Memory limit (e.g., \"4GB\", \"2048MB\")"
        },
        "disk": {
          "type": "string",
          "title": "Disk/storage limit (e.g., \"50GB\", \"100GB\")"
        }
      },
      "title": "ResourceLimits defines resource constraints for a container"
    },
    "ResourceType": {
      "type": "string",
      "enum": [
        "RESOURCE_TYPE_UNSPECIFIED",
        "RESOURCE_TYPE_CONTAINER",
        "RESOURCE_TYPE_APP",
        "RESOURCE_TYPE_ROUTE",
        "RESOURCE_TYPE_METRICS",
        "RESOURCE_TYPE_TRAFFIC"
      ],
      "default": "RESOURCE_TYPE_UNSPECIFIED",
      "description": "- RESOURCE_TYPE_UNSPECIFIED: Unspecified resource type\n - RESOURCE_TYPE_CONTAINER: Container resource\n - RESOURCE_TYPE_APP: App resource\n - RESOURCE_TYPE_ROUTE: Route resource\n - RESOURCE_TYPE_METRICS: Metrics resource\n - RESOURCE_TYPE_TRAFFIC: Traffic resource",
      "title": "ResourceType identifies which resource type an event pertains to"
    },
    "RestartAppBody": {
      "type": "object",
      "title": "RestartAppRequest restarts an app"
    },
    "RestartAppResponse": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "Updated app"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "RouteEvent": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/ProxyRoute",
          "title": "The route that was affected"
        }
      },
      "title": "RouteEvent contains route-specific event data"
    },
    "RouteProtocol": {
      "type": "string",
      "enum": [
        "ROUTE_PROTOCOL_UNSPECIFIED",
        "ROUTE_PROTOCOL_HTTP",
        "ROUTE_PROTOCOL_GRPC",
        "ROUTE_PROTOCOL_TCP",
        "ROUTE_PROTOCOL_UDP"
      ],
      "default": "ROUTE_PROTOCOL_UNSPECIFIED",
      "description": "- ROUTE_PROTOCOL_UNSPECIFIED: Unspecified protocol (defaults to HTTP)\n - ROUTE_PROTOCOL_HTTP: HTTP/1.1 and HTTP/2 (standard web traffic) - for proxy routes\n - ROUTE_PROTOCOL_GRPC: gRPC (requires HTTP/2 transport) - for proxy routes\n - ROUTE_PROTOCOL_TCP: TCP passthrough - for passthrough routes\n - ROUTE_PROTOCOL_UDP: UDP passthrough - for passthrough routes",
      "title": "RouteProtocol represents the protocol type for a route"
    },
    "StartAppBody": {
      "type": "object",
      "title": "StartAppRequest starts a stopped app"
    },
    "StartAppResponse": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "Updated app"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "StartContainerBody": {
      "type": "object",
      "title": "StartContainerRequest is the request to start a container"
    },
    "StartContainerResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "container": {
          "$ref": "#/definitions/Container",
          "title": "Updated container state"
        }
      },
      "title": "StartContainerResponse is the response from starting a container"
    },
    "Status": {
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int32"
        },
        "message": {
          "type": "string"
        },
        "details": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/Any"
          }
        }
      }
    },
    "StopAppBody": {
      "type": "object",
      "title": "StopAppRequest stops a running app"
    },
    "StopAppResponse": {
      "type": "object",
      "properties": {
        "app": {
          "$ref": "#/definitions/App",
          "title": "Updated app"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "StopContainerBody": {
      "type": "object",
      "properties": {
        "force": {
          "type": "boolean",
          "title": "Force stop (kill) instead of graceful shutdown"
        },
        "timeout": {
          "type": "integer",
          "format": "int32",
          "title": "Timeout in seconds for graceful shutdown (default: 30)"
        }
      },
      "title": "StopContainerRequest is the request to stop a container"
    },
    "StopContainerResponse": {
      "type": "object",
      "properties": {
        "message": {
          "type": "string",
          "title": "Success message"
        },
        "container": {
          "$ref": "#/definitions/Container",
          "title": "Updated container state"
        }
      },
      "title": "StopContainerResponse is the response from stopping a container"
    },
    "SystemInfo": {
      "type": "object",
      "properties": {
        "incusVersion": {
          "type": "string",
          "title": "Incus version"
        },
        "os": {
          "type": "string",
          "title": "Operating system"
        },
        "kernelVersion": {
          "type": "string",
          "title": "Kernel version"
        },
        "totalCpus": {
          "type": "integer",
          "format": "int32",
          "title": "Total CPU cores"
        },
        "totalMemoryBytes": {
          "type": "string",
          "format": "int64",
          "title": "Total memory in bytes"
        },
        "availableMemoryBytes": {
          "type": "string",
          "format": "int64",
          "title": "Available memory in bytes"
        },
        "totalDiskBytes": {
          "type": "string",
          "format": "int64",
          "title": "Total disk space in bytes"
        },
        "availableDiskBytes": {
          "type": "string",
          "format": "int64",
          "title": "Available disk space in bytes"
        },
        "containersRunning": {
          "type": "integer",
          "format": "int32",
          "title": "Number of containers running"
        },
        "containersStopped": {
          "type": "integer",
          "format": "int32",
          "title": "Number of containers stopped"
        },
        "containersTotal": {
          "type": "integer",
          "format": "int32",
          "title": "Total number of containers"
        },
        "hostname": {
          "type": "string",
          "title": "Hostname of the system"
        },
        "uptimeSeconds": {
          "type": "string",
          "format": "int64",
          "title": "Uptime in seconds"
        },
        "networkCidr": {
          "type": "string",
          "title": "Container network CIDR (e.g., \"10.100.0.0/24\")"
        },
        "cpuLoad1min": {
          "type": "number",
          "format": "double",
          "title": "CPU load average (1 minute)"
        },
        "cpuLoad5min": {
          "type": "number",
          "format": "double",
          "title": "CPU load average (5 minutes)"
        },
        "cpuLoad15min": {
          "type": "number",
          "format": "double",
          "title": "CPU load average (15 minutes)"
        }
      },
      "title": "SystemInfo contains information about the host system"
    },
    "TrafficAggregate": {
      "type": "object",
      "properties": {
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "title": "Start of the aggregation interval"
        },
        "destIp": {
          "type": "string",
          "title": "Destination IP (if grouped by dest_ip)"
        },
        "destPort": {
          "type": "integer",
          "format": "int64",
          "title": "Destination port (if grouped by dest_port)"
        },
        "bytesSent": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes sent in this interval"
        },
        "bytesReceived": {
          "type": "string",
          "format": "int64",
          "title": "Total bytes received in this interval"
        },
        "connectionCount": {
          "type": "integer",
          "format": "int32",
          "title": "Number of connections in this interval"
        }
      },
      "title": "TrafficAggregate provides time-series aggregated traffic data"
    },
    "TrafficDirection": {
      "type": "string",
      "enum": [
        "TRAFFIC_DIRECTION_UNSPECIFIED",
        "TRAFFIC_DIRECTION_INGRESS",
        "TRAFFIC_DIRECTION_EGRESS"
      ],
      "default": "TRAFFIC_DIRECTION_UNSPECIFIED",
      "description": "- TRAFFIC_DIRECTION_UNSPECIFIED: Unspecified direction\n - TRAFFIC_DIRECTION_INGRESS: Traffic coming into the container\n - TRAFFIC_DIRECTION_EGRESS: Traffic leaving the container",
      "title": "TrafficDirection indicates the direction of traffic relative to the container"
    },
    "TrafficEvent": {
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/TrafficEventType",
          "title": "Event type (new, update, destroy)"
        },
        "connection": {
          "$ref": "#/definitions/Connection",
          "title": "The connection affected"
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "title": "When the event occurred"
        }
      },
      "title": "TrafficEvent represents a real-time connection event"
    },
    "TrafficEventType": {
      "type": "string",
      "enum": [
        "TRAFFIC_EVENT_TYPE_UNSPECIFIED",
        "TRAFFIC_EVENT_TYPE_NEW",
        "TRAFFIC_EVENT_TYPE_UPDATE",
        "TRAFFIC_EVENT_TYPE_DESTROY"
      ],
      "default": "TRAFFIC_EVENT_TYPE_UNSPECIFIED",
      "description": "- TRAFFIC_EVENT_TYPE_UNSPECIFIED: Unspecified event type\n - TRAFFIC_EVENT_TYPE_NEW: New connection established\n - TRAFFIC_EVENT_TYPE_UPDATE: Connection state or counters updated\n - TRAFFIC_EVENT_TYPE_DESTROY: Connection terminated",
      "title": "TrafficEventType represents the type of traffic event"
    },
    "UpdateContainerACLBody": {
      "type": "object",
      "properties": {
        "preset": {
          "$ref": "#/definitions/ACLPreset",
          "title": "Use a preset (mutually exclusive with custom rules)"
        },
        "ingressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Custom ingress rules (only if preset is CUSTOM)"
        },
        "egressRules": {
          "type": "array",
          "items": {
            "type": "object",
            "$ref": "#/definitions/ACLRule"
          },
          "title": "Custom egress rules (only if preset is CUSTOM)"
        }
      },
      "title": "UpdateContainerACLRequest updates firewall rules for a DevBox container"
    },
    "UpdateContainerACLResponse": {
      "type": "object",
      "properties": {
        "acl": {
          "$ref": "#/definitions/NetworkACL",
          "title": "Updated ACL"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "UpdatePassthroughRouteBody": {
      "type": "object",
      "properties": {
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol: TCP or UDP (required, identifies the route)"
        },
        "targetIp": {
          "type": "string",
          "title": "New target IP (optional, empty means no change)"
        },
        "targetPort": {
          "type": "integer",
          "format": "int32",
          "title": "New target port (optional, 0 means no change)"
        },
        "containerName": {
          "type": "string",
          "title": "Optional: Associated container name (for display)"
        },
        "description": {
          "type": "string",
          "title": "Optional: Description"
        },
        "active": {
          "type": "boolean",
          "title": "Enable or disable the route (optional, only updated if set)"
        }
      },
      "title": "UpdatePassthroughRouteRequest updates an existing passthrough route"
    },
    "UpdatePassthroughRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/PassthroughRoute",
          "title": "The updated route"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    },
    "UpdateRouteBody": {
      "type": "object",
      "properties": {
        "targetIp": {
          "type": "string",
          "title": "New target container IP address (optional, empty means no change)"
        },
        "targetPort": {
          "type": "integer",
          "format": "int32",
          "title": "New target port (optional, 0 means no change)"
        },
        "containerName": {
          "type": "string",
          "title": "Optional: Associated container name"
        },
        "description": {
          "type": "string",
          "title": "Optional: Description"
        },
        "protocol": {
          "$ref": "#/definitions/RouteProtocol",
          "title": "Protocol type (HTTP or gRPC, defaults to HTTP)"
        },
        "active": {
          "type": "boolean",
          "title": "Enable or disable the route (optional, only updated if set)"
        }
      },
      "title": "UpdateRouteRequest updates an existing proxy route"
    },
    "UpdateRouteResponse": {
      "type": "object",
      "properties": {
        "route": {
          "$ref": "#/definitions/ProxyRoute",
          "title": "The updated route"
        },
        "message": {
          "type": "string",
          "title": "Status message"
        }
      }
    }
  },
  "securityDefinitions": {
    "bearer": {
      "type": "apiKey",
      "description": "Bearer token authentication. Format: 'Bearer \u003ctoken\u003e'",
      "name": "Authorization",
      "in": "header"
    }
  },
  "security": [
    {
      "bearer": []
    }
  ]
}
